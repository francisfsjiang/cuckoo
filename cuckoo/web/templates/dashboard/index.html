{% extends "base.html" %}
{% load staticfiles %}
{% block content %}

<div id="cuckoo-dashboard" class="hidden"></div>

<div class="flex-grid__horizontal--grow dashboard">

    <div class="flex-grid__column dashboard__left" id="dashboard-tables">

        <h2 class="dashboard__col-title">近期分析</h2>
        <div class="dashboard-module__lg" data-dashboard-module="processes" style="background-color: white; height: 400px">
            <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
            <div id="main" style="width: 95%;height:95%;margin: 10px;"></div>
        </div>

        <!-- recent analyses -->
        <div class="dashboard-module__lg" data-dashboard-module="processes">
            <header class="dashboard-module__header">

                <div class="flex-tabs__tabs dashboard-module__tabs">

                    <!-- <a href="#" class="flex-tabs__tab active">Analyses</a>
                    <a href="#" class="flex-tabs__tab">Tasks</a>
                    <a href="#" class="flex-tabs__tab">Failed</a> -->

                    <div class="flex-tabs__tab--right">
                        <div class="custom-select" data-custom="select">
                            <span>展示任务数量: </span>
                            <select data-select="limit">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3" selected="selected">3</option>
                                <option value="5">5</option>
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="50">50</option>
                            </select>
                        </div>
                    </div>

                </div>

            </header>
            <section class="dashboard-module__body" data-populate="dashboard-table-recent">
{#                <div class="dashboard-module__body--left" data-populate="dashboard-table-recent">#}
{#                </div>#}
{#                <div class="dashboard-module__body--left" data-populate="dashboard-table-recent">#}
{#                </div>#}

                <!--
                <div class="dashboard-module__body--right" data-populate="dashboard-table-pending">
                </div>
                -->
            </section>

            <footer class="dashboard-module__footer">
                <p><a href="/analysis/">显示所有最近分析</a></p>
            </footer>

        </div>

    </div>

    <div class="flex-grid__column dashboard__right">


        <h2 class="dashboard__col-title">恶意软件识别</h2>


        <div class="dashboard-module" data-dashboard-module="system">
            <header class="dashboard-module__header">
                <h4 class="align-left clearfix">
                    系统信息
                    <div class="pull-right">
                        <span class="label label-free">空闲</span>
                        <span class="label label-used">已使用</span>
                        <span class="label label-total">总量</span>
                    </div>
                </h4>
            </header>
            <section class="dashboard-module__body free-disk-space">

                <div class="dashboard-module__body--flex">
                    <h5>磁盘空间</h5>
                    <div class="free-disk-space__chart" id="ds-stat">
                        <canvas></canvas>
                        <div class="free-disk-space__legend">
                            <p><strong data-populate="free-disk-space"></strong></p>
                            <p data-populate="total-disk-space"></p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-module__body--flex">
                    <h5>CPU负载</h5>
                    <div class="free-disk-space__chart" id="cpu-stat">
                        <canvas></canvas>
                        <div class="free-disk-space__legend">
                            <p><strong data-populate="cpu-load"></strong></p>
                            <p data-populate="total-cores"></p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-module__body--flex">
                    <h5>内存使用量</h5>
                    <div class="free-disk-space__chart" id="memory-stat">
                        <canvas></canvas>
                        <div class="free-disk-space__legend">
                            <p><strong data-populate="memory-used"></strong></p>
                            <p data-populate="memory-total"></p>
                        </div>
                    </div>
                </div>

            </section>
            <!--
            <footer class="dashboard-module__footer">
                <p><i class="fa fa-info-circle"></i> How to: <a href="http://docs.cuckoosandbox.org/en/latest/installation/host/configuration/" target="_blank">Configure Cuckoo system options</a></p>
            </footer>
            -->
        </div>

        <div class="dashboard-module" data-dashboard-module="system">
            <header class="dashboard-module__header">
                <h4 class="align-left clearfix">
                    系统信息
                    <div class="pull-right">
                        <span class="label label-free">空闲</span>
                        <span class="label label-used">已使用</span>
                        <span class="label label-total">总量</span>
                    </div>
                </h4>
            </header>
            <section class="dashboard-module__body free-disk-space">

                <div class="dashboard-module__body--flex">
                    <h5>磁盘空间</h5>
                    <div class="free-disk-space__chart" id="ds-stat">
                        <canvas></canvas>
                        <div class="free-disk-space__legend">
                            <p><strong data-populate="free-disk-space"></strong></p>
                            <p data-populate="total-disk-space"></p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-module__body--flex">
                    <h5>CPU负载</h5>
                    <div class="free-disk-space__chart" id="cpu-stat">
                        <canvas></canvas>
                        <div class="free-disk-space__legend">
                            <p><strong data-populate="cpu-load"></strong></p>
                            <p data-populate="total-cores"></p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-module__body--flex">
                    <h5>内存使用量</h5>
                    <div class="free-disk-space__chart" id="memory-stat">
                        <canvas></canvas>
                        <div class="free-disk-space__legend">
                            <p><strong data-populate="memory-used"></strong></p>
                            <p data-populate="memory-total"></p>
                        </div>
                    </div>
                </div>

            </section>
            <!--
            <footer class="dashboard-module__footer">
                <p><i class="fa fa-info-circle"></i> How to: <a href="http://docs.cuckoosandbox.org/en/latest/installation/host/configuration/" target="_blank">Configure Cuckoo system options</a></p>
            </footer>
            -->
        </div>

    </div>

</div>

<div class="flex-grid__horizontal--grow dashboard bottom">


</div>

    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: '堆叠区域图'
            },
            tooltip : {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross',
                    label: {
                        backgroundColor: '#6a7985'
                    }
                }
            },
            legend: {
                data:['高危','中危','低危']
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '15%',
                containLabel: true
            },
            xAxis : [
                {
                    type : 'category',
                    boundaryGap : false,
                    data : ['周一','周二','周三','周四','周五','周六','周日']
                }
            ],
            yAxis : [
                {
                    type : 'value'
                }
            ],
            dataZoom: [
                {
                    id: 'dataZoomX',
                    type: 'slider',
                    xAxisIndex: [0],
                    filterMode: 'filter',
                    bottom: 10,
                    start: 30,
                    end: 100
                }
            ],
            series : [
                {
                    name:'高危',
                    type:'line',
                    stack: '总量',
                    areaStyle: {normal: {}},
                    data:[120, 132, 101, 134, 90, 230, 210]
                },
                {
                    name:'中危',
                    type:'line',
                    stack: '总量',
                    areaStyle: {normal: {}},
                    data:[220, 182, 191, 234, 290, 330, 310]
                },
                {
                    name:'低危',
                    type:'line',
                    stack: '总量',
                    areaStyle: {normal: {}},
                    data:[150, 232, 201, 154, 190, 330, 410]
                }
            ]
        };


        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);

        window.onresize = function () {
            myChart.resize();
        }
    </script>

{% endblock %}
